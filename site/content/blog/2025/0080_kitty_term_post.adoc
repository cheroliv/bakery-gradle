= Installer le terminal Kitty et configurer Zsh comme shell sous ubuntu
@cheroliv
2025-07-12
:author: cheroliv
:toclevels: 3
:imagesdir: ./images
:jbake-title: Installer le terminal Kitty et configurer Zsh comme shell par d√©faut sous Xubuntu
:jbake-type: post
:jbake-tags: asciidoc, documentation, syntaxe, kitty, zsh, xubuntu
:jbake-status: published
:jbake-date: 2025-07-12
:summary: Ce billet pr√©sente la d√©marche compl√®te d'installation et configuration de kitty terminal sous ubuntu.
:revdate: 2025-07-12
:toc: left
:icons: font
:sectnumlevels: 6
:sectnums:
:toc-title: Sommaire
:source-highlighter: highlightjs


Ce guide explique pas √† pas comment installer le terminal *kitty* sur Xubuntu, le configurer correctement, et remplacer bash par *zsh* comme shell par d√©faut.
Le projet kitty est disponible ici : https://github.com/kovidgoyal/kitty.

[quote]
____
Kitty est un terminal moderne, rapide et configurable, particuli√®rement adapt√© aux d√©veloppeurs exigeants.
____

== Pourquoi choisir Kitty et Zsh ?

Kitty se distingue par :

* Des performances sup√©rieures gr√¢ce √† l‚Äôacc√©l√©ration GPU,
* Une configuration enti√®rement bas√©e sur un fichier texte unique,
* Une excellente prise en charge des polices et des ligatures.

Zsh est quant √† lui un shell interactif puissant offrant :

* Une compl√©tion intelligente,
* Un prompt personnalisable,
* Une grande compatibilit√© avec bash.

En associant Kitty et Zsh, vous b√©n√©ficiez d‚Äôun environnement productif et esth√©tique.

[plantuml, kitty-zsh-overview, png]
----
@startuml
title Architecture simplifi√©e Kitty + Zsh

actor User

User --> Kitty : Lance le terminal
Kitty --> Zsh : Initialise le shell interactif
Zsh --> System : Interagit avec le syst√®me (fichiers, commandes)
@enduml
----

[NOTE]
====
Ce guide est volontairement limit√© √† l‚Äôinstallation via script et √† Xubuntu.
====



== Pr√©-requis syst√®me

Avant de commencer, assurez-vous d‚Äôavoir :

* Xubuntu install√©,
* un acc√®s √† internet,
* un shell bash fonctionnel pour lancer le script.

V√©rifiez votre environnement :
[source,bash]
----
uname -a
lsb_release -a
----

== T√©l√©chargement et installation de Kitty

Kitty recommande de l‚Äôinstaller via un script officiel qui place les fichiers dans `~/.local/kitty.app`.

[IMPORTANT]
====
Cette m√©thode est ind√©pendante des gestionnaires de paquets (pas de `apt`).
====

=== T√©l√©charger le script d‚Äôinstallation

Ex√©cutez la commande suivante :

[source,bash]
----
curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin
----

Cette commande effectue :

* t√©l√©chargement des binaires,
* extraction dans `~/.local/kitty.app`,
* cr√©ation des liens symboliques.

[plantuml, download-install, svg]
----
@startuml
title T√©l√©chargement et installation de Kitty

start
:curl -L installer.sh;
:sh /dev/stdin;
:D√©compression dans ~/.local/kitty.app;
:create symlinks;
stop
@enduml
----

=== Cr√©ation des liens symboliques

Afin de pouvoir invoquer `kitty` depuis le terminal, cr√©ez un lien symbolique :

[source,bash]
----
ln -s ~/.local/kitty.app/bin/kitty ~/.local/bin/kitty
----

Ajoutez `~/.local/bin` √† votre PATH si ce n‚Äôest pas d√©j√† fait :

[source,bash]
----
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
----

Vous pouvez v√©rifier l‚Äôinstallation :

[source,bash]
----
kitty --version
----

== Int√©gration de Kitty dans Xubuntu

Pour que Kitty apparaisse dans le menu des applications :

=== Copier le fichier desktop

Copiez le fichier `.desktop` fourni :

[source,bash]
----
cp ~/.local/kitty.app/share/applications/kitty.desktop ~/.local/share/applications/
----

=== Modifier le fichier desktop

Editez le fichier :

[source,bash]
----
nano ~/.local/share/applications/kitty.desktop
----

V√©rifiez ou modifiez les lignes suivantes :

[source]
----
[Desktop Entry]
Version=1.0
Type=Application
Name=Kitty Terminal
Comment=Fast GPU-based terminal emulator
Exec=/home/YOURUSER/.local/kitty.app/bin/kitty
Icon=kitty
Categories=System;TerminalEmulator;
----

Remplacez `YOURUSER` par votre nom d‚Äôutilisateur.

[plantuml, desktop-integration, png]
----
@startuml
title Processus d'int√©gration de Kitty dans le menu Xubuntu

start
:Copier .desktop;
:Editer les chemins;
:Sauvegarder;
:Menu Applications;
stop
@enduml
----

=== Associer Kitty comme terminal par d√©faut (facultatif)

Pour que Kitty soit le terminal lanc√© par d√©faut :

[source,bash]
----
sudo update-alternatives --install /usr/bin/x-terminal-emulator x-terminal-emulator ~/.local/kitty.app/bin/kitty 50
sudo update-alternatives --config x-terminal-emulator
----

S√©lectionnez `kitty` dans le menu propos√©.

== Installation de Zsh

Si Zsh n‚Äôest pas encore install√©, ex√©cutez :

[source,bash]
----
sudo apt install zsh
----

V√©rifiez l‚Äôinstallation :

[source,]
----
zsh --version
----

== D√©finir Zsh comme shell par d√©faut

Vous pouvez changer votre shell globalement ou uniquement dans Kitty.

=== M√©thode globale (pour tous les terminaux)

Identifiez le chemin absolu :

[source,bash]
----
which zsh
----

En g√©n√©ral `/usr/bin/zsh`.

Modifiez le shell par d√©faut :

[source,bash]
----
chsh -s /usr/bin/zsh
----

D√©connectez-vous et reconnectez-vous.

[plantuml, zsh-default-shell, svg]
----
@startuml
title Changement global de shell

actor User

User --> Bash : Session actuelle
User --> System : chsh -s /usr/bin/zsh
System --> "/etc/passwd" : Modifie le shell
note right of "/etc/passwd" : Shell par d√©faut mis √† jour
@enduml
----

=== M√©thode sp√©cifique √† Kitty

Si vous pr√©f√©rez uniquement changer le shell dans Kitty, √©ditez le fichier de configuration :

[source,bash]
----
nano ~/.config/kitty/kitty.conf
----

Ajoutez cette ligne :
[source,text]
----
shell zsh
----

Enregistrez et red√©marrez Kitty.

== Configuration de Zsh (optionnel)

Pour personnaliser votre Zsh :

=== Cr√©er un fichier .zshrc

[source,bash]
----
touch ~/.zshrc
nano ~/.zshrc
----

=== Exemple de configuration minimale

[source,bash]
----
export ZSH_THEME="robbyrussell"
export PATH="$HOME/.local/bin:$PATH"
alias ll="ls -la"
----

== R√©sum√© du workflow complet

Le sch√©ma ci-dessous r√©capitule l‚Äôensemble du processus :

[plantuml, full-workflow, png]
----
@startuml
title Workflow d'installation et configuration

start
:T√©l√©chargement script Kitty;
:Installation dans ~/.local;
:Cr√©ation symlink;
:Ajout ~/.local/bin au PATH;
if (Zsh install√© ?) then (non)
  :sudo apt install zsh;
endif
:Configurer Kitty.desktop;
:Optionnel - changer terminal par d√©faut;
:Optionnel - chsh -s /usr/bin/zsh;
stop
@enduml
----

== V√©rification finale

Lancez Kitty :

[source,bash]
----
kitty
----

Vous devriez voir que `zsh` est actif :

[source,bash]
----
echo $SHELL
----

R√©sultat attendu :

----
/usr/bin/zsh
----


Pour modifier la taille de la police dans **Kitty**, il faut ajuster le param√®tre `font_size` dans le fichier de configuration. Voici la proc√©dure d√©taill√©e‚ÄØ:

'''

=== üìÇ Ouvrir le fichier de configuration

Le fichier principal de configuration est habituellement situ√© dans‚ÄØ:

[source,bash]
----
~/.config/kitty/kitty.conf
----

Si ce fichier n‚Äôexiste pas encore, vous pouvez le cr√©er.
Exemple :

[source,bash]
----
nano ~/.config/kitty/kitty.conf
----

'''

=== üñãÔ∏è Ajouter ou modifier `font_size`

Ajoutez la directive suivante, ou modifiez-la si elle existe d√©j√†‚ÄØ:

[source,text]
----
font_size 14.0
----

Ici `14.0` correspond √† la taille souhait√©e. Vous pouvez mettre n‚Äôimporte quelle valeur d√©cimale, par exemple `12.0`, `15.5`, etc.

'''

=== üíæ Enregistrer et relancer Kitty

* Enregistrez (`Ctrl + O`, puis `Entr√©e`) et quittez (`Ctrl + X`) si vous utilisez `nano`.
* Fermez toutes les fen√™tres de Kitty, puis relancez le terminal pour que le changement prenne effet.

'''

=== ‚úÖ Ajustement dynamique (Zoom temporaire)

Si vous souhaitez zoomer/d√©zoomer temporairement sans modifier la configuration, utilisez les raccourcis clavier par d√©faut‚ÄØ:

* **Augmenter la taille de la police**‚ÄØ:
`Ctrl + Shift + =`
* **Diminuer la taille de la police**‚ÄØ:
`Ctrl + Shift + -`
* **R√©initialiser la taille**‚ÄØ:
`Ctrl + Shift + Backspace`

Ces r√©glages ne persistent pas apr√®s la fermeture du terminal.

== Installation et configuration de Oh My Zsh

Une fois Zsh install√© et configur√© comme shell par d√©faut, vous pouvez enrichir votre environnement avec *Oh My Zsh*, un framework de gestion de la configuration Zsh, offrant‚ÄØ:

* une collection de th√®mes pour le prompt,
* de nombreux plugins,
* une organisation claire de la configuration.

=== Installation de Oh My Zsh

Assurez-vous que Zsh est actif‚ÄØ:

[source,bash]
----
zsh --version
----

Si n√©cessaire, lancez‚ÄØ:

[source,bash]
----
zsh
----

Puis t√©l√©chargez et ex√©cutez le script d'installation officiel‚ÄØ:

[source,bash]
----
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
----

Ce script :

* cr√©e le dossier `~/.oh-my-zsh`,
* sauvegarde √©ventuellement votre fichier `~/.zshrc`,
* active automatiquement le nouveau prompt.

=== Changer le th√®me

Ouvrez votre fichier de configuration :

[source,bash]
----
nano ~/.zshrc
----

Modifiez la variable `ZSH_THEME` pour choisir un autre th√®me (par exemple `agnoster`) :

----
ZSH_THEME="agnoster"
----

Enregistrez puis rechargez la configuration :

[source,bash]
----
source ~/.zshrc
----

=== V√©rification

Lancez Kitty et v√©rifiez que le prompt a bien chang√©.
Vous pouvez confirmer qu'Oh My Zsh est actif en ex√©cutant :

[source,bash]
----
echo $ZSH
----

Le r√©sultat devrait √™tre similaire √† :

----
/home/votre_utilisateur/.oh-my-zsh
----

=== Diagramme du use case

[plantuml, ohmyzsh-installation, png]
----
@startuml
title Use case installation et utilisation de Oh My Zsh

actor Utilisateur as User

package "Kitty Terminal" {
  component "Zsh Shell" as Zsh
}

component "Oh My Zsh Framework" as OhMyZsh

User --> Kitty : Lance Kitty
Kitty --> Zsh : Initialise Zsh
Zsh --> OhMyZsh : Charge configuration (~/.zshrc, th√®mes, plugins)
User --> OhMyZsh : Personnalise le th√®me et les plugins

@enduml
----

'''

== Activer la translucidit√© dans Kitty

Une des fonctionnalit√©s les plus appr√©ci√©es de Kitty est la possibilit√© d'ajouter de la *transparence* au fond du terminal. Cela permet de voir l√©g√®rement l‚Äôenvironnement sous-jacent (fen√™tre, bureau, etc.), ce qui est particuli√®rement utile en multit√¢che.

=== Pr√©-requis pour la transparence

La transparence dans Kitty repose sur le **compositeur de fen√™tres** utilis√© par l‚Äôenvironnement graphique.
Sous Xubuntu (bas√© sur XFCE), assurez-vous que la **composition est activ√©e**.

.√Ä v√©rifier :
* clic droit sur le bureau > Param√®tres > **Param√®tres du gestionnaire de fen√™tres**,
* onglet **Compositeur** : la case *"Activer la composition"* doit √™tre coch√©e.

[plantuml, transparency-usecase, png]
----
@startuml
title Use Case - Activer la transparence dans Kitty

actor Utilisateur

rectangle "Environnement graphique (XFCE/Xubuntu)" {
  usecase "Activer la composition" as UC1
}

rectangle "Kitty Terminal" {
  usecase "D√©finir la transparence dans kitty.conf" as UC2
}

Utilisateur --> UC1
Utilisateur --> UC2

@enduml
----

=== Configuration de la transparence dans kitty.conf

Ouvrez votre fichier de configuration `~/.config/kitty/kitty.conf` :

[source,bash]
----
nano ~/.config/kitty/kitty.conf
----

Ajoutez ou modifiez les lignes suivantes :

[source,conf]
----
background_opacity 0.85
----

Ce param√®tre accepte des valeurs entre :

* `1.0` ‚Üí opaque (aucune transparence),
* `0.0` ‚Üí compl√®tement transparent (inutilisable),
* valeurs interm√©diaires comme `0.90`, `0.75`, etc.

Un bon compromis visuel est g√©n√©ralement entre `0.85` et `0.95`.

=== Red√©marrer Kitty

Fermez toutes les instances de Kitty, puis relancez une nouvelle fen√™tre pour que les modifications prennent effet :

[source,bash]
----
kitty
----

=== Compl√©ments possibles

Si vous utilisez un fond de terminal personnalis√©, vous pouvez √©galement d√©finir une couleur de fond avec transparence (en RGBA) :

[source,conf]
----
background #1e1e2eff
----

La derni√®re composante (`ff`) indique l'opacit√© (de `00` √† `ff`).

=== Diagramme de s√©quence - Initialisation de Kitty avec transparence

[plantuml, transparency-sequence, png]
----
@startuml
title S√©quence de d√©marrage de Kitty avec transparence

actor User
participant "Kitty" as Kitty
participant "XFCE Compositeur" as XFCE
participant "GPU/Window Manager" as WM

User -> Kitty : Lance Kitty
Kitty -> kitty.conf : Lit configuration
Kitty -> XFCE : V√©rifie composition activ√©e
XFCE --> Kitty : Composition = active
Kitty -> WM : Demande allocation fen√™tr√©e transparente
WM --> Kitty : OK (rendu avec alpha < 1)
Kitty -> User : Affiche terminal translucide

@enduml
----

=== Limitations connues

[WARNING]
====
La translucidit√© ne fonctionne pas si :

- le compositeur XFCE est d√©sactiv√©,
- un gestionnaire de fen√™tres incompatible est utilis√©,
- vous utilisez Kitty dans un mode *tmux* en arri√®re-plan sans support de transparence.
====

'''

== Mise √† jour de Kitty

Puisque Kitty est install√© via un script et non un gestionnaire de paquets, la mise √† jour se fait en relan√ßant le script d'installation officiel. Cela permet de t√©l√©charger la derni√®re version et de mettre √† jour votre installation existante dans `~/.local/kitty.app`.

[NOTE]
====
Le suffixe `.app` dans le chemin `~/.local/kitty.app` est la convention d'installation de Kitty sur Linux via son script officiel, et n'indique en aucun cas une compatibilit√© exclusive avec macOS.
====

[IMPORTANT]
====
Avant de lancer la commande de mise √† jour, assurez-vous d'√™tre dans votre r√©pertoire personnel (par exemple, en utilisant la commande `cd`).
== Mise √† jour de Kitty

Puisque Kitty est install√© via un script et non un gestionnaire de paquets, la mise √† jour se fait en relan√ßant le script d'installation officiel. Cela permet de t√©l√©charger la derni√®re version et de mettre √† jour votre installation existante dans `~/.local/kitty.app`.

[NOTE]
====
Le suffixe `.app` dans le chemin `~/.local/kitty.app` est la convention d'installation de Kitty sur Linux via son script officiel, et n'indique en aucun cas une compatibilit√© exclusive avec macOS.
====

[IMPORTANT]
====
Avant de lancer la commande de mise √† jour, assurez-vous d'√™tre dans votre r√©pertoire personnel (`~`).
====

Ex√©cutez la commande suivante depuis votre r√©pertoire personnel :

[source,bash]
----
curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin
----

Ce script se chargera de :

* T√©l√©charger les binaires de la nouvelle version.
* Extraire les fichiers dans `~/.local/kitty.app`.
* Mettre √† jour les liens symboliques si n√©cessaire.

Apr√®s la mise √† jour, il est recommand√© de fermer toutes les instances de Kitty et de les relancer pour s'assurer que la nouvelle version est bien prise en compte.

== R√©f√©rences

Si vous souhaitez approfondir la personnalisation, consultez la documentation officielle :

* Kitty : https://sw.kovidgoyal.net/kitty/
** https://sw.kovidgoyal.net/kitty/conf/#opt-kitty.background_opacity
* Zsh : https://zsh.sourceforge.io/
* Github: https://github.com/kovidgoyal/kitty
* Zsh: https://zsh.sourceforge.io/
** https://ohmyz.sh/
** https://github.com/ohmyzsh/ohmyzsh/wiki
* https://docs.xfce.org/xfce/xfwm4/compositor


== Conclusion

Vous disposez maintenant :

* d‚Äôun terminal moderne et performant (Kitty)
* d‚Äôun shell puissant et personnalisable (Zsh)
* d‚Äôune configuration propre et ind√©pendante des paquets syst√®mes
* d'un terminal esth√©tique et fonctionnel √©quip√© de Oh My Zsh
